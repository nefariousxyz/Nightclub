<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Nightclub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        dark: {
                            900: '#0f172a',
                            800: '#1e293b',
                            700: '#334155',
                            600: '#475569',
                        },
                        primary: {
                            500: '#6366f1',
                            600: '#4f46e5',
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['Fira Code', 'monospace'],
                    }
                }
            }
        }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        .glass {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        .glass-panel {
            background: rgba(15, 23, 42, 0.6);
            backdrop-filter: blur(16px);
            border-right: 1px solid rgba(255, 255, 255, 0.05);
        }
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #475569; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #64748b; }
        
        .spinner {
            border: 3px solid rgba(255,255,255,0.1);
            border-left-color: #6366f1;
            border-radius: 50%;
            width: 24px; height: 24px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { to { transform: rotate(360deg); } }
    </style>
</head>
<body class="bg-slate-900 text-slate-200 h-screen selection:bg-indigo-500 selection:text-white">
    
    <!-- Protection System -->
    <script src="js/protection.js"></script>
    
    <!-- Version Management -->
    <script src="js/version.js"></script>

    <!-- Login Screen -->
    <div id="login-screen" class="fixed inset-0 z-50 flex items-center justify-center bg-slate-900 bg-[url('https://grainy-gradients.vercel.app/noise.svg')]">
        <div class="glass p-8 rounded-2xl shadow-2xl w-full max-w-md border border-slate-700/50 relative overflow-hidden">
            <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500"></div>
            <div class="text-center mb-8">
                <div class="w-16 h-16 bg-indigo-500/20 rounded-full flex items-center justify-center mx-auto mb-4 text-indigo-400">
                    <i class="ph-fill ph-shield-check text-3xl"></i>
                </div>
                <h1 class="text-2xl font-bold text-white tracking-tight">Admin Portal</h1>
                <p class="text-slate-400 text-sm mt-1">Secure Access Required</p>
            </div>
            
            <form id="login-form" class="space-y-4">
                <div>
                    <label class="block text-xs font-medium text-slate-400 mb-1 uppercase tracking-wider">Email</label>
                    <div class="relative">
                        <i class="ph-bold ph-envelope absolute left-3 top-3 text-slate-500"></i>
                        <input type="email" id="login-email" class="w-full bg-slate-800/50 border border-slate-700 rounded-lg py-2.5 pl-10 pr-4 text-sm focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition-all placeholder-slate-600" placeholder="admin@nightclub.com" required>
                    </div>
                </div>
                <div>
                    <label class="block text-xs font-medium text-slate-400 mb-1 uppercase tracking-wider">Password</label>
                    <div class="relative">
                        <i class="ph-bold ph-lock-key absolute left-3 top-3 text-slate-500"></i>
                        <input type="password" id="login-password" class="w-full bg-slate-800/50 border border-slate-700 rounded-lg py-2.5 pl-10 pr-4 text-sm focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition-all placeholder-slate-600" placeholder="••••••••" required>
                    </div>
                </div>
                <button type="submit" class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-medium py-2.5 rounded-lg transition-all transform active:scale-[0.98] shadow-lg shadow-indigo-500/20 flex items-center justify-center gap-2 group">
                    <span>Authenticate</span>
                    <i class="ph-bold ph-arrow-right group-hover:translate-x-1 transition-transform"></i>
                </button>
            </form>
            <div id="login-error" class="mt-4 p-3 bg-red-500/10 border border-red-500/20 rounded-lg text-red-400 text-xs text-center hidden"></div>
        </div>
    </div>

    <!-- Dashboard Layout -->
    <div id="dashboard" class="flex h-screen opacity-0 pointer-events-none transition-opacity duration-500">
        <!-- Sidebar -->
        <aside class="w-64 glass-panel flex flex-col h-full shrink-0 z-20">
            <div class="p-6 flex items-center gap-3 border-b border-white/5">
                <div class="w-8 h-8 bg-indigo-600 rounded-lg flex items-center justify-center shadow-lg shadow-indigo-500/20">
                    <i class="ph-bold ph-crown text-white text-lg"></i>
                </div>
                <span class="font-bold text-lg tracking-tight text-white">NightAdmin</span>
            </div>

            <div class="flex-1 overflow-y-auto py-4 space-y-6 px-3">
                <div>
                    <div class="px-3 text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2">Overview</div>
                    <nav class="space-y-1">
                        <button class="nav-item w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium text-indigo-400 bg-indigo-500/10 transition-all" data-page="dashboard">
                            <i class="ph-fill ph-squares-four text-lg"></i> Dashboard
                        </button>
                        <button class="nav-item w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium text-slate-400 hover:text-slate-200 hover:bg-white/5 transition-all" data-page="analytics">
                            <i class="ph-fill ph-chart-line-up text-lg"></i> Analytics
                        </button>
                    </nav>
                </div>

                <div>
                    <div class="px-3 text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2">Management</div>
                    <nav class="space-y-1">
                        <button class="nav-item w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium text-slate-400 hover:text-slate-200 hover:bg-white/5 transition-all" data-page="users">
                            <i class="ph-fill ph-users text-lg"></i> Users
                        </button>
                        <button class="nav-item w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium text-slate-400 hover:text-slate-200 hover:bg-white/5 transition-all" data-page="clubs">
                            <i class="ph-fill ph-buildings text-lg"></i> Clubs
                        </button>
                        <button class="nav-item w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium text-slate-400 hover:text-slate-200 hover:bg-white/5 transition-all" data-page="chat">
                            <i class="ph-fill ph-chat-circle-text text-lg"></i> Chat
                        </button>
                        <button class="nav-item w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium text-slate-400 hover:text-slate-200 hover:bg-white/5 transition-all" data-page="broadcast">
                            <i class="ph-fill ph-megaphone text-lg"></i> Broadcast
                        </button>
                    </nav>
                </div>

                <div>
                    <div class="px-3 text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2">System</div>
                    <nav class="space-y-1">
                        <button class="nav-item w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium text-slate-400 hover:text-slate-200 hover:bg-white/5 transition-all" data-page="economy">
                            <i class="ph-fill ph-coins text-lg"></i> Economy
                        </button>
                        <button class="nav-item w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium text-slate-400 hover:text-slate-200 hover:bg-white/5 transition-all" data-page="logs">
                            <i class="ph-fill ph-scroll text-lg"></i> Logs
                        </button>
                        <button class="nav-item w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium text-slate-400 hover:text-slate-200 hover:bg-white/5 transition-all" data-page="anticheat">
                            <i class="ph-fill ph-shield-warning text-lg"></i> Anti-Cheat
                        </button>
                        <button class="nav-item w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium text-slate-400 hover:text-slate-200 hover:bg-white/5 transition-all" data-page="shop">
                            <i class="ph-fill ph-storefront text-lg"></i> Shop Manager
                        </button>
                        <button class="nav-item w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium text-slate-400 hover:text-slate-200 hover:bg-white/5 transition-all" data-page="coupons">
                            <i class="ph-fill ph-ticket text-lg"></i> Gift Codes
                        </button>
                    </nav>
                </div>
            </div>

            <div class="p-4 border-t border-white/5">
                <div class="flex items-center gap-3 p-3 rounded-lg bg-white/5 border border-white/5">
                    <div class="w-8 h-8 rounded-full bg-gradient-to-br from-purple-500 to-indigo-500 flex items-center justify-center text-xs font-bold text-white">AD</div>
                    <div class="flex-1 overflow-hidden">
                        <div class="text-sm font-medium text-white truncate" id="admin-name">Admin</div>
                        <div class="text-xs text-indigo-400">Superadmin</div>
                    </div>
                    <button onclick="admin.logout()" class="text-slate-400 hover:text-red-400 transition-colors p-1">
                        <i class="ph-bold ph-sign-out text-lg"></i>
                    </button>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 flex flex-col relative bg-[url('https://grainy-gradients.vercel.app/noise.svg')]">
            <!-- Header -->
            <header class="h-16 glass border-b border-white/5 flex items-center justify-between px-8 z-10">
                <div class="flex items-center gap-4">
                    <h2 class="text-xl font-semibold text-white" id="page-title">Dashboard</h2>
                    <div class="h-4 w-px bg-white/10"></div>
                    <span class="text-sm text-slate-400" id="current-date"></span>
                </div>
                <div class="flex items-center gap-3">
                    <button class="p-2 rounded-lg text-slate-400 hover:text-white hover:bg-white/5 transition-all relative">
                        <i class="ph-bold ph-bell text-xl"></i>
                        <span class="absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full"></span>
                    </button>
                    <button onclick="admin.refreshAll()" class="p-2 rounded-lg text-slate-400 hover:text-indigo-400 hover:bg-indigo-500/10 transition-all" title="Refresh Data">
                        <i class="ph-bold ph-arrows-clockwise text-xl"></i>
                    </button>
                </div>
            </header>

            <!-- Content Area -->
            <div id="main-content" class="flex-1 min-h-0 overflow-y-auto p-8 space-y-6 scroll-smooth">
                <!-- Content loaded by JS -->
            </div>
        </main>
    </div>

    <!-- Modal Overlay -->
    <div id="modal-overlay" class="fixed inset-0 z-50 bg-slate-900/80 backdrop-blur-sm hidden flex items-center justify-center opacity-0 transition-opacity duration-300">
        <!-- Modal content injected by JS -->
    </div>

    <!-- Toast Container -->
    <div id="toast-container" class="fixed bottom-6 right-6 z-[60] flex flex-col gap-3 pointer-events-none"></div>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Admin Logic -->
    <script src="js/admin-dashboard.js"></script>
    <script>
        document.getElementById('current-date').textContent = new Date().toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
    </script>
    
    <!-- Offline Checker -->
    <script src="js/offline-checker.js"></script>
</body>
</html>
